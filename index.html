<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>SoftBodiesPhysic by coringuyen</title>
    
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script src="TemplateData/UnityProgress.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body class="template">
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/coringuyen/SoftBodiesPhysic">View On GitHub</a></li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>SoftBodiesPhysic</h1>
          <p></p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/coringuyen">coringuyen</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>
		
		<p class="header"><span style="margin-left:-168px;">Unity WebGL Player | </span>SoftBodiesPhysic</p>
			<div class="template-wrap clear">
			<span style="margin-left:-168px;"><canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" height="600px" width="1000px"></canvas></span>
			<div class="logo"></div>
			</div>
		 <p class="footer"><span style="margin-left:-168px;">&laquo; created with <a href="http://unity3d.com/" title="Go to unity3d.com">Unity</a></span>&raquo;</p>
    <script type='text/javascript'>
  // connect to canvas
  var Module = {
    TOTAL_MEMORY: 268435456,
    filePackagePrefixURL: "Release/",
    memoryInitializerPrefixURL: "Release/",
    preRun: [],
    postRun: [],
    print: (function() {
      return function(text) {
        console.log (text);
      };
    })(),
    printErr: function(text) {
      console.error (text);
    },
    canvas: document.getElementById('canvas'),
    progress: null,
    setStatus: function(text) {
      if (this.progress == null) 
      {
        if (typeof UnityProgress != 'function')
          return;
        this.progress = new UnityProgress (canvas);
      }
      if (!Module.setStatus.last) Module.setStatus.last = { time: Date.now(), text: '' };
      if (text === Module.setStatus.text) return;
      this.progress.SetMessage (text);
      var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
      if (m)
        this.progress.SetProgress (parseInt(m[2])/parseInt(m[4]));
      if (text === "") 
        this.progress.Clear()
    },
    totalDependencies: 0,
    monitorRunDependencies: function(left) {
      this.totalDependencies = Math.max(this.totalDependencies, left);
      Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
    }
  };
  Module.setStatus('Downloading (0.0/1)');
</script>
<script src="Release/UnityConfig.js"></script>
<script src="Release/fileloader.js"></script>
<script>if (!(!Math.fround)) {
  var script = document.createElement('script');
  script.src = "Release/WebGL.js";
  document.body.appendChild(script);
} else {
  var codeXHR = new XMLHttpRequest();
  codeXHR.open('GET', 'Release/WebGL.js', true);
  codeXHR.onload = function() {
    var code = codeXHR.responseText;
    if (!Math.fround) { 
try {
  console.log('optimizing out Math.fround calls');
  var m = /var ([^=]+)=global\.Math\.fround;/.exec(code);
  var minified = m[1];
  if (!minified) throw 'fail';
  var startAsm = code.indexOf('// EMSCRIPTEN_START_FUNCS');
  var endAsm = code.indexOf('// EMSCRIPTEN_END_FUNCS');
  var asm = code.substring(startAsm, endAsm);
  do {
    var moar = false; // we need to re-do, as x(x( will not be fixed
    asm = asm.replace(new RegExp('[^a-zA-Z0-9\\$\\_]' + minified + '\\(', 'g'), function(s) { moar = true; return s[0] + '(' });
  } while (moar);
  code = code.substring(0, startAsm) + asm + code.substring(endAsm);
  code = code.replace("'use asm'", "'almost asm'");
} catch(e) { console.log('failed to optimize out Math.fround calls ' + e) }
 }

    var blob = new Blob([code], { type: 'text/javascript' });
    codeXHR = null;
    var src = URL.createObjectURL(blob);
    var script = document.createElement('script');
    script.src = URL.createObjectURL(blob);
    script.onload = function() {
      URL.revokeObjectURL(script.src);
    };
    document.body.appendChild(script);
  };
  codeXHR.send(null);
}
</script>
		
        <h1>
<a id="problem-description" class="anchor" href="#problem-description" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<strong>Problem Description</strong>
</h1>

<p><strong>Name</strong>: Cloth Simulation</p>
<p><strong>Problem Statement</strong>: Implement cloth simulation using particle, spring-damper, and triangle. Under two step of physic simulation is compute forces, and integrate motion.</p>
<p><strong>Problem Specification</strong>:<br/>
    <span style="padding-left:68px;">Compute Force:</span><br/> 
		<span style="padding-left:136px;">For each particle apply Gravity force.</span><br/>
		<span style="padding-left:136px;">For each spring-damper compute spring force then apply the force to the two <span style="padding-left:136px;">particles that this spring-damper connected to.</span><br/>
		<span style="padding-left:136px;">For each triangle compute aerodynamic force then apply the force to the 3 <span style="padding-left:136px;">particles that form the triangle.</span><br/>
    <span style="padding-left:68px;">Integrate Motion: For each particle apply Euler Integration.</span><br/></p>

<h1>
<a id="user-interface-information" class="anchor" href="#user-interface-information" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>User Interface Information</strong>
</h1>

<p>Name: SpringConstant<br/>
Description: stiffness of the spring</p>

<p>Name: DampingFactor<br/>
Description: spring velocity restriction</p>

<p>Name: RestLength<br/>
Description: spring length that need to maintain</p>

<p>Name: Air Blow (Z)<br/>
Description: the direction of air will blow on z axis</p>

<p>Name: Create Cloth<br/>
Description: Instantiate the Grid</p>

<p>Name: Exit<br/>
Description: quit the application</p>

<p>Name: Destroy<br/>
Description: destroy the cloth(Grid)</p>

<p>Name: Row<br/>
Description: number of row for particle</p>

<p>Name: Column<br/>
Description: number of column for particle</p>

<p>Name: Width<br/>
Description: the width of the cloth. How long the cloth would be</p>

<p>Name: Height<br/>
Description: the height of the cloth. How tall the cloth would be</p>

<h1>
<a id="functions-information" class="anchor" href="#functions-information" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Functions Information</strong>
</h1>

<p><strong>File</strong>: ClothSimulation.cs<br/>
Class: ClothSimulation<br/>
Data members:<br/>
    <span style="padding-left:68px;">Name: ParticlesPreb</span><br/>
    <span style="padding-left:68px;">Description: the gameobject that will use to instantiate particle</span></p>
	<p><span style="padding-left:68px;">Name: SpringsPreb</span><br/>
    <span style="padding-left:68px;">Description: the gameobject that will use to instantiate spring-damper</span></p>
    <p><span style="padding-left:68px;">Name: TrianglePreb</span><br/>
    <span style="padding-left:68px;">Description: the gameobject that will use to instantiate triangle</span></p>
    <p><span style="padding-left:68px;">Name: rows</span><br/>
    <span style="padding-left:68px;">Description: number of rows the particle will spawn in</span> </p>
    <p><span style="padding-left:68px;">Name: cols</span><br/>
    <span style="padding-left:68px;">Description: number of column the particle will spawn in</span></p>
    <p><span style="padding-left:68px;">Name: width</span><br/>
    <span style="padding-left:68px;">Description: Entire width of cloth. Also, give the space between particles on row</span></p>
    <p><span style="padding-left:68px;">Name: height</span><br/>
    <span style="padding-left:68px;">Description: Entire height of cloth. This also give the space between particles on column</span></p>
    <p><span style="padding-left:68px;">Name: clothgui</span><br/>
    <span style="padding-left:68px;">Description: to access ClothGUI class data members</span></p>
    <p><span style="padding-left:68px;">Name: particles</span><br/>
    <span style="padding-left:68px;">Description: a list to store particle</span></p>
    <p><span style="padding-left:68px;">Name: springDampers</span><br/>
    <span style="padding-left:68px;">Description: a list to store spring-damper</span></p>
    <p><span style="padding-left:68px;">Name: triangles</span><br/>
    <span style="padding-left:68px;">Description: a list to store triangle</span></p>

<p>Function: SetAnchor<br/>
Parameters: n/a<br/>
Description: Set 2 as a pin-point to hold up the cloth(Grid)<br/>
Return: n/a</p>

<p>Function: ClothSpawn<br/>
Parameters: n/a<br/>
Description: Instantiate the cloth(Grid) using particle, spring-damper, triangle and SetAnchor function<br/>
Return: n/a</p>

<p>Function: FixedUpdate<br/>
Parameters: n/a<br/>
Description: compute forces and integrate motion<br/>
Return: n/a</p>

<p>Function: Start<br/>
Parameters: n/a<br/>
Description: assign clothgui to GetComponent of class ClothGUI<br/>
Return: n/a</p>

<p>Function: DestroyCloth<br/>
Parameters: n/a<br/>
Description: destroy cloth at run time. All the lists assign to a new list. Also, reset InputField<br/>
Return: n/a</p>

<p><strong>File</strong>: Particle.cs<br/>
Class: Particle<br/>
Data members<br/>
    <span style="padding-left:68px;">Name: Position</span><br/>
    <span style="padding-left:68px;">Description: use to get, and update particle world space position</span></p>
    <p><span style="padding-left:68px;">Name: Velocity</span><br/>
    <span style="padding-left:68px;">Description: particle speed with direction</span></p>
    <p><span style="padding-left:68px;">Name: Force</span><br/>
    <span style="padding-left:68px;">Description: using this force to calculate Acceleration from Newton’s Second Law</span></p>
    <p><span style="padding-left:68px;">Name: mass</span><br/>
    <span style="padding-left:68px;">Description: weight of the particle</span></p>
    <p><span style="padding-left:68px;">Name: isAnchor</span><br/>
    <span style="padding-left:68px;">Description: if the particle is anchor, no calculation on it</span></p>

<p>Function: EulerIntegration <br/>
Parameters: n/a<br/>
Description: integrate particle motion by calculating acceleration with Newton’s second law then add it to the particle Velocity with the time that past by. Update particle position with that Velocity also with the time that past by. This calculation won’t apply to the particle that is anchor<br/>
Return: n/a</p>

<p>Function: Start<br/>
Parameter: n/a<br/>
Description: Zero out Velocity, and assign Position to this gameobject current position that this script attach to<br/>
Return: n/a </p>

<p><strong>File</strong>: SpringDamper.cs<br/>
Class: SpringDamper<br/>
Data members<br/>
    <span style="padding-left:68px;">Name: SpringConstant</span><br/>
    <span style="padding-left:68px;">Description: the coefficient to control the stiffness of the spring</span></p>
    <p><span style="padding-left:68px;">Name: DampingFactor</span><br/>
    <span style="padding-left:68px;">Description: the coefficient to restrict the spring velocity so it won’t go crazy</span></p>
    <p><span style="padding-left:68px;">Name: RestLength</span><br/>
	<span style="padding-left:68px;">Description: the coefficient for spring length that need to be maintain</span></p>
    <p><span style="padding-left:68px;">Name: p1</span><br/>
    <span style="padding-left:68px;">Description: the first particle that this spring connect to</span></p>
    <p><span style="padding-left:68px;">Name: p2</span><br/>
    <span style="padding-left:68px;">Description: the second particle that this spring connect to</span></p>

<p>Function: SetSpring<br/>
Parameters: Particle _p1, Particle _p2<br/>
Description: _p1 and _p2 are the two particles that this spring connected to. Use _p1 and _p2 to get the information of which particle it is, then assign them to p1 and p2 data members<br/>
Return: n/a</p>

<p>Function: computeForce<br/>
Parameters: n/a<br/>
Description: Calculate spring force from the two particles that this spring connected to, then apply that force to the particles force<br/>
Return: n/a</p>

<p>Function: Update<br/>
Parameters: n/a<br/>
Description: update spring as the particle position change<br/>
Return: n/a</p>

<p><strong>File</strong>: Triangle.cs<br/>
Class: Triangle<br/>
Data members<br/>
	<span style="padding-left:68px;">Name: p1</span><br/>
	<span style="padding-left:68px;">Description: the first particle to form the triangle</span></p>
	<p><span style="padding-left:68px;">Name: p2</span><br/>
	<span style="padding-left:68px;">Description: the second particle to form the triangle</span></p>
	<p><span style="padding-left:68px;">Name: p3</span><br/>
	<span style="padding-left:68px;">Description: the third particle to form the triangle</span></p>
	<p><span style="padding-left:68px;">Name: airVelocity</span><br/>
	<span style="padding-left:68px;">Description: air direction</span></p>
	<p><span style="padding-left:68px;">Name: airDensity</span><br/>
	<span style="padding-left:68px;">Description: how strong the air will blow</span></p>
	<p><span style="padding-left:68px;">Name: dragCoefficient</span><br/>
	<span style="padding-left:68px;">Description: how much the object will resist from the air</span></p>

<p>Function: Start<br/>
Parameters: n/a<br/>
Description: zero out airVelocity, assign airDensity to 1, and dragCoefficient to 0.5<br/>
Return: n/a</p>

<p>Function: makeTriangle<br/>
Parameters: Particle _p1, Particle _p2, Particle _p3<br/>
Description: _p1, _p2, and _p3 are the three particles that going to form the triangle. Takes in three particles to get the information of which particle belong to this triangle <br/>
Return:n/a</p>

<p>Function: computeForce<br/>
Parameters: n/a<br/>
Description: computing aerodynamic force for the triangle, then apply for each particle force of the triangle<br/>
Return: n/a</p>

<p><strong>File</strong>: Exit.cs<br/>
Class: Exit<br/>
Data members<br/>
    n/a</p>

<p>Function: exitApplication<br/>
Parameters: n/a<br/>
Description: quit the application<br/>
Return: n/a</p>

<p><strong>File</strong>: ClothGUI.cs<br/>
Class: ClothGUI<br/>
Data members<br/>
    <span style="padding-left:68px;">Name: SpringConstant</span><br/>
    <span style="padding-left:68px;">Description: user can change the stiffness of the spring</span></p>
   <p><span style="padding-left:68px;">Name: DampingFactor</span><br/>
    <span style="padding-left:68px;">Description: user can change the velocity restriction of the spring </span></p>
	<p><span style="padding-left:68px;">Name: RestLength</span><br/>
    <span style="padding-left:68px;">Description:  user can change the length of the spring that need to be maintain</span></p>
	<p><span style="padding-left:68px;">Name: AirBlow</span><br/>
    <span style="padding-left:68px;">Description: user can put some air on the z axis</span></p>
	<p><span style="padding-left:68px;">Name: Exit</span><br/>
    <span style="padding-left:68px;">Description: when this button press the application will quit</span></p>
	<p><span style="padding-left:68px;">Name: createCloth</span><br/>
	<span style="padding-left:68px;">Description: spawn the cloth(Grid). Set all the sliders to active, and put the exit <span style="padding-left:68px;">button to bottom right corner</span></p>
	<p><span style="padding-left:68px;">Name: DestroyCloth</span><br/>
    <span style="padding-left:68px;">Description: destroy the cloth(Grid)</span></p>
    <p><span style="padding-left:68px;">Name: Row</span><br/>
    <span style="padding-left:68px;">Description: to get the user input for rows</span></p>
    <p><span style="padding-left:68px;">Name: Column</span><br/>
    <span style="padding-left:68px;">Description: to get the user input for cols</span></p>
    <p><span style="padding-left:68px;">Name: Width</span><br/>
    <span style="padding-left:68px;">Description: to get the user input for width</span></p>
    <p><span style="padding-left:68px;">Name: Height</span><br/>
    <span style="padding-left:68px;">Description: to get the user input for height</span></p>
	
<p>Function: Start<br/>
Parameters: n/a<br/>
Description: set all the GUI elements position depend on the screen width and height<br/>
Return: n/a</p>

<p>Function: Update<br/>
Parameters: n/a<br/>
Description: Checking if the user input on the InputField. If user did, Create Cloth button is able to click . If user didn’t, Create Cloth button is disable<br/>
Return: n/a</p>

<h1>
<a id="implementation" class="anchor" href="#implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a><strong>Implementation</strong>
</h1>

<p><strong>File</strong>: ClothSimulation.cs<br/>
using UnityEngine;<br/>
using System.Collections;<br/>
using System.Collections.Generic;</p>

<p>#Function: Start<br/>
#Parameters: n/a<br/>
#Description: assign clothgui to GetComponent of class ClothGUI<br/>
#Return: n/a</p>
<pre><code>void Start()
{
    clothgui = GetComponent();
}</code></pre>

<p>#Function: FixedUpdate<br/>
#Parameters: n/a<br/>
#Description: compute forces and integrate motion<br/>
#Return: n/a</p>
<pre><code>void FixedUpdate()
{
    foreach (Particle o in particles)
    {
        if (o)
        {
            Vector3 gravityForce = new Vector3(0f, -9.8f, 0f) * o.mass;
            o.Force = gravityForce;
        }
    }

	foreach (SpringDamper s in springDampers)
	{
		if (s)
		{
			s.SpringConstant = clothgui.SpringConstant.value;
			s.DampingFactor = clothgui.DampingFactor.value;
			s.Restlength = clothgui.RestLength.value;
			s.computeForce();
		}
	}

	foreach (Triangle t in triangles)
	{
		if (t)
		{
			t.airVelocity.z = clothgui.AirBlow.value;
			t.computeForce();
		}
	{

	foreach (Particle o in particles)
	{
		if (o)
		{ o.EulerIntegration(); }
	}

}</code></pre>

<p>#Function: DestroyCloth<br/>
#Parameters: n/a<br/>
#Description: destroy cloth at run time. All the lists assign to a new list. Also, reset InputField<br/>
#Return: n/a</p>
<pre><code>public void DestroyCloth()
{
     foreach (Particle p in particles)
     {
         Destroy(p.gameObject);
     }

	 foreach (SpringDamper s in springDampers)
	 {
		 Destroy(s.gameObject);
	 }

	 foreach (Triangle t in triangles)
	 {
		 Destroy(t.gameObject);
	 }

	 clothgui.Row.text = “”;
	 clothgui.Column.text = “”;
	 clothgui.Width.text = “”;
	 clothgui.Height.text = “”;

	 springDampers = new List&lt;SpringDamper&gt;();
	 particles = new List&lt;Particle&gt;();
	 triangles = new List&lt;Triangle&gt;();

}</code></pre>

<p>#Function: ClothSpawn<br/>
#Parameters: n/a<br/>
#Description: Instantiate the cloth(Grid) using particle, spring-damper, triangle and SetAnchor function<br/>
#Return: n/a</p>
<pre><code>public void ClothSpawn()
{
	Particle particle;
	for (int i = 0; i &lt; rows; ++i) 
	{
		for (int j = 0; j &lt; cols; ++j) 
		{
			particle = Instantiate (ParticlesPreb);
			particle.transform.position = new Vector3 (i * width / rows, j * height / cols, 0);
			particle.transform.parent = transform;
			particles.Add (particle);
		}
	}

	for(int i = 0; i &lt; rows * cols; ++i)
	{
		if (i + rows &lt; rows * cols)
		{
			SpringDamper RowSpring = Instantiate(SpringsPreb);
			RowSpring.transform.parent = transform;
			RowSpring.SetSpring(particles[i], particles[i + rows]);
			springDampers.Add(RowSpring);

			if((i % cols) != rows - 1)
			{
				SpringDamper ColSpring = Instantiate(SpringsPreb);
				ColSpring.transform.parent = transform;
				ColSpring.SetSpring(particles[i], particles[i + 1]);
				springDampers.Add(ColSpring);
			}

			if (i + 1 &lt; rows * cols &amp;&amp; i + rows &lt; rows * cols)
			{
				SpringDamper RightDSpring = Instantiate(SpringsPreb);
				RightDSpring.transform.parent = transform;
				RightDSpring.SetSpring(particles[i + 1], particles[i + rows]);
				springDampers.Add(RightDSpring);
			}

			if(i + rows + 1 &lt; rows * cols)
			{
				SpringDamper LeftDSpring = Instantiate(SpringsPreb);
				LeftDSpring.transform.parent = transform;
				LeftDSpring.SetSpring(particles[i], particles[i + rows + 1]);
				springDampers.Add(LeftDSpring);
			}           
		}
	}

	for (int i = 0; i &lt; rows * cols; ++i)
	{
		if (i + 1 &lt; rows * cols &amp;&amp; i + rows &lt; rows * cols &amp;&amp; i + rows + 1 &lt; rows * cols)
		{
		   Triangle firstTriangle = Instantiate(TrianglePreb);
		   firstTriangle.transform.parent = transform;
		   firstTriangle.makeTriangle(particles[i], particles[i + 1], particles[i + rows]);
		   triangles.Add(firstTriangle);

		   Triangle secondTriangle = Instantiate(TrianglePreb);
		   secondTriangle.transform.parent = transform;
		   secondTriangle.makeTriangle(particles[i], particles[i + 1], particles[i + rows + 1]);
		   triangles.Add(secondTriangle);

		   Triangle thirdTriangle = Instantiate(TrianglePreb);
		   thirdTriangle.transform.parent = transform;
		   thirdTriangle.makeTriangle(particles[i + 1], particles[i+rows], particles[i+rows+1]);
		   triangles.Add(thirdTriangle);

		   Triangle fourTriangle = Instantiate(TrianglePreb);
		   fourTriangle.transform.parent = transform;
		   fourTriangle.makeTriangle(particles[i], particles[i+rows], particles[i + rows + 1]);
		   triangles.Add(fourTriangle);
		}
	}

	SetAnchor();

}</code></pre>

<p>#Function: SetAnchor<br/>
#Parameters: n/a<br/>
#Description: Set 2 as a pin-point to hold up the cloth(Grid)<br/>
#Return: n/a</p>
<pre><code>void SetAnchor()
{
    if (clothgui.anchor2.isOn == true)
        {
            particles[cols - 1].isAnchor = true;
            particles[rows * cols - 1].isAnchor = true;
        }

        if (clothgui.anchor4.isOn == true)
        {
            particles[0].isAnchor = true;
            particles[cols - 1].isAnchor = true;
            particles[rows * cols - 1].isAnchor = true;
            particles[rows * cols - cols].isAnchor = true;
        }
    }
}</code></pre>

<p><strong>File</strong>: Particle.cs<br/>
Using UnityEngine;<br/>
Using System.Collections;</p>

<p>#Function: EulerIntegration <br/>
#Parameters: n/a<br/>
#Description: integrate particle motion by calculating acceleration with Newton’s second law then add it to the particle Velocity with the time that past by. Update particle position with that Velocity also with the time that past by. This calculation won’t apply to the particle that is anchor<br/>
#Return: n/a</p>
<pre><code>public void EulerIntegration()
{
    if (!isAnchor)
    {
        Vector3 Acceleration = Force / mass;
        Velocity += Acceleration * Time.deltaTime;
        Position += Velocity * Time.deltaTime;
    }
}</code></pre>

<p>#Function: Start<br/>
#Parameter: n/a<br/>
#Description: Zero out Velocity, and assign Position to this gameobject current position that this script attach to<br/>
#Return: n/a </p>
<pre><code>void Start()
{
    Velocity = new Vector3 (0,0,0);
    Position = transform.position;
}</code></pre>

<p><strong>File</strong>: SpringDamper.cs<br/>
Using UnityEngine;<br/>
Using System.Collections;</p>

<p>#Function: SetSpring<br/>
#Parameters: Particle _p1, Particle _p2<br/>
#Description: _p1 and _p2 are the two particles that this spring connected to. Use _p1 and _p2 to get the information of which particle it is, then assign them to p1 and p2 data members<br/>
#Return: n/a</p>
<pre><code>public void SetSpring(Particle _p1, Particle _p2)
{
    p1 = _p1;
    p2 = _p2;
}</code></pre>

<p>#Function: computeForce<br/>
#Parameters: n/a<br/>
#Description: Calculate spring force from the two particles that this spring connected to, then apply that force to the particles force<br/>
#Return: n/a</p>
<pre><code>public void computeForce()
{
    float particlesDistance = Vector3.Distance(p1.Position ,p2.Position);
    Vector3 particlesDiff = p2.Position - p1.Position;
    Vector3 normalizeParticlesDiff = particlesDiff.normalized;</p>

	float springForce = - SpringConstant * (Restlength - particlesDistance);

	float particle1Vel = Vector3.Dot (normalizeParticlesDiff, p1.Velocity); 
	float particle2Vel = Vector3.Dot (normalizeParticlesDiff, p2.Velocity);

	float dampForce = - DampingFactor * (particle1Vel - particle2Vel);

	float springDamper = springForce + dampForce;

	Vector3 force1 = springDamper * normalizeParticlesDiff;
	Vector3 force2 = -force1;

	p1.Force += force1;
	p2.Force += force2;


}</code></pre>

<p>#Function: Update<br/>
#Parameters: n/a<br/>
#Description: update spring as the particle position change<br/>
#Return: n/a</p>
<pre><code>void Update()
{
    LineRenderer spring = GetComponent();
    spring.SetPosition(0, p1.Position);
    spring.SetPosition(1, p2.Position);
}</code></pre>

<p><strong>File</strong>: Triangle.cs<br/>
using UnityEngine;<br/>
using System.Collections;</p>

<p>#Function: Start<br/>
#Parameters: n/a<br/>
#Description: zero out airVelocity, assign airDensity to 1, and dragCoefficient to 0.5<br/>
#Return: n/a</p>
<pre><code>void Start()
{
   airVelocity = new Vector3(0, 0, 0);
   airDensity = 1f;
   dragCoefficient = 1f;
}</code></pre>

<p>#Function: makeTriangle<br/>
#Parameters: Particle _p1, Particle _p2, Particle _p3<br/>
#Description: _p1, _p2, and _p3 are the three particles that going to form the triangle. Takes in three particles to get the information of which particle belong to this triangle <br/>
#Return:n/a</p>
<pre><code>public void makeTriangle(Particle _p1, Particle _p2, Particle _p3)
{
   p1 = _p1;
   p2 = _p2;
   p3 = _p3;
}</code></pre>

<p>#Function: computeForce<br/>
#Parameters: n/a<br/>
#Description: computing aerodynamic force for the triangle, then apply for each particle force of the triangle<br/>
#Return: n/a</p>
<pre><code>public void computeForce()
{
    Vector3 part1 = p2.Position - p1.Position;
    Vector3 part2 = p3.Position - p1.Position;</p>

	Vector3 averageVel = (p1.Velocity + p2.Velocity + p3.Velocity) / 3;
	averageVel -= airVelocity;

	Vector3 crossProductof3points = Vector3.Cross(part1, part2);
	Vector3 Trianglenormal = crossProductof3points / crossProductof3points.magnitude;

	Vector3 v2_an = ((0.5f * Vector3.Dot(averageVel, Trianglenormal) * 
	averageVel.magnitude) / crossProductof3points.magnitude) * crossProductof3points;

	Vector3 aeroForce = -0.5f * airDensity * dragCoefficient * v2_an;

	aeroForce /= 3f;

	p1.Force += aeroForce;
	p2.Force += aeroForce;
	p3.Force += aeroForce;


}</code></pre>

<p><strong>File</strong>: Exit.cs<br/>
using UnityEngine;<br/>
using System.Collections;</p>

<p>#Function: exitApplication<br/>
#Parameters: n/a<br/>
#Description: quit the application<br/>
#Return: n/a</p>
<pre><code>public void exitApplication()
{
   Application.Quit();
}</code></pre>

<p><strong>File</strong>: ClothGUI.cs<br/>
using UnityEngine;<br/>
using UnityEngine.UI;<br/>
using System.Collections;</p>

<p>#Function: Start<br/>
#Parameters: n/a<br/>
#Description: set all the GUI elements position depend on the screen width and height<br/>
#Return: n/a</p>
<pre><code>void Start ()
{
    DestroyCloth.GetComponent().position = new Vector3(Screen.width * 
    0.85f, Screen.height * 0.9f, 0);
    CreateCloth.GetComponent().position = new Vector3(Screen.width * 
    0.5f, Screen.height * 0.54f, 0);
    Exit.GetComponent().position = new Vector3(Screen.width * 0.5f, 
    Screen.height * 0.44f, 0);
    RestLength.GetComponent().position = new Vector3(Screen.width * 
    0.15f, Screen.height * 0.9f, 0);
    DampingFactor.GetComponent().position = new Vector3(Screen.width * 
    0.15f, Screen.height * 0.8f, 0);
    SpringConstant.GetComponent().position = new Vector3(Screen.width * 
    0.15f, Screen.height * 0.7f, 0);
    AirBlow.GetComponent().position = new Vector3(Screen.width * 0.15f, 
    Screen.height * 0.6f, 0);</p>

	Row.GetComponent&lt;RectTransform&gt;().position = new Vector3(Screen.width * 0.3f, 
	Screen.height * 0.8f, 0);
	Column.GetComponent&lt;RectTransform&gt;().position = new Vector3(Screen.width * 0.42f, 
	Screen.height * 0.8f, 0);
	Width.GetComponent&lt;RectTransform&gt;().position = new Vector3(Screen.width * 0.58f, 
	Screen.height * 0.8f, 0);
	Height.GetComponent&lt;RectTransform&gt;().position = new Vector3(Screen.width * 0.7f,  
	Screen.height * 0.8f, 0);

	CreateCloth.gameObject.SetActive(true);
	Exit.gameObject.SetActive(true);
	
}</code></pre>

<p>#Function: Update<br/>
#Parameters: n/a<br/>
#Description: Checking if the user input on the InputField. If user did, Create Cloth button is able to click . If user didn’t, Create Cloth button is disable<br/>
#Return: n/a</p>
<pre><code>void Update()
{
    if (Row.text != "" &amp;&amp; Column.text != "" &amp;&amp; Width.text != "" &amp;&amp; Height.text != "")
    {
        CreateCloth.interactable = true;
    }
    else
        CreateCloth.interactable = false;
}</code></pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
